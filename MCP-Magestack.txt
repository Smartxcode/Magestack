Ten plik zawiera wszystko:
 ✔ pełną architekturę,
 ✔ szczegółową strukturę katalogów,
 ✔ dokładne zasady działania,
 ✔ wytyczne dla crawlerów,
 ✔ schemat bazy danych,
 ✔ implementację serwera MCP,
 ✔ CLI, indexery, narzędzia,
 ✔ publikację na npm,
 ✔ integrację z hostami MCP (Claude Desktop),
 ✔ zasady aktualizacji,
 ✔ zasady licencyjne,
 ✔ wymagania niefunkcjonalne,
 ✔ standardy kodowania.
To jeden z najbardziej kompletnych dokumentów jakie można stworzyć do budowy własnego MCP.
Możesz go kopiować w całości — jest w formacie plain text.
 ULTRA-KOMPLETNY SPECYFIKACYJNY PLIK WYTYCZNY DO STWORZENIA MCP SERVERA
Dokumentacja: MageOS, Hyvä, Satoshi Theme
Wersja: 2.0 — ekstremalnie precyzyjna
Dla: Claude Code / generator projektu
0. CEL DOKUMENTU
Zadaniem tego dokumentu jest precyzyjne i jednoznaczne określenie wszystkich aspektów tworzenia profesjonalnego serwera MCP (Model Context Protocol) służącego jako lokalny, wysokowydajny, wieloźródłowy system dokumentacji technicznej dla frameworków:
* MageOS
* Hyvä Themes
* Satoshi Hyvä Theme (Scandiweb)
Serwer umożliwi agentom AI (Claude, ChatGPT, własne LLM-y) wykonywanie natychmiastowych zapytań do bogatej dokumentacji w trybie:
* Retrieval-Augmented Generation (RAG),
* context aware operations,
* szybkie wyszukiwanie pełnotekstowe,
* dostarczanie precyzyjnych fragmentów dokumentacji.
Serwer MCP będzie pobierany bezpośrednio z GitHuba i uruchamiany za pomocą:
npx @smartx/mcp-mageos-docs@latest

dokładnie tak, jak w projekcie playwright-mcp od Microsoftu.
1. ARCHITEKTURA OGÓLNA
1.1. Elementy systemu
Serwer MCP składa się z:
1. Warstwy pobierania dokumentacji
	* crawlerów do pobierania dokumentów z HTML/Markdown/Notion API,
	* skryptów aktualizujących,
	* modułów do przetwarzania treści.
1. Warstwy indeksacji i przechowywania
	* baza SQLite,
	* tabela pełnotekstowa FTS5,
	* mechanizm deduplikacji i kontroli wersji dokumentów (hash SHA-256).
1. Warstwy udostępniania danych (MCP tools)
	* search_docs
	* get_doc
	* (opcjonalnie) search_sections, get_toc, search_code_examples
1. Warstwy uruchamiania (CLI / npx)
	* program mcp-mageos-docs
	* plik uruchamiany przez MCP host
1. Warstwy aktualizacyjnej
	* automatyczne aktualizacje z GitHuba,
	* cron jobs,
	* aktualizacja bazy danych.
2. STRUKTURA PROJEKTU (REPO NA GITHUBIE)
Repo będzie wyglądać następująco:
mcp-mageos-docs/
│
├── src/
│   ├── server.ts                # serwer MCP
│   ├── cli.ts                   # CLI uruchamiane przez npx
│   ├── db/
│   │     ├── schema.sql
│   │     └── initDB.ts
│   ├── indexers/
│   │     ├── mageos.ts          # indexer MageOS
│   │     ├── hyva.ts            # indexer Hyvä
│   │     ├── satoshi.ts         # indexer Satoshi Theme
│   │     └── common.ts          # logika wspólna
│   ├── utils/
│   │     ├── http.ts
│   │     ├── htmlToText.ts
│   │     ├── markdownToText.ts
│   │     ├── hash.ts
│   │     ├── logger.ts
│   │     └── fsUtils.ts
│   └── config.ts
│
├── dist/                        # build TypeScript
│
├── package.json                 # publikacja npm
├── tsconfig.json
├── README.md
└── LICENSE

3. BAZA DANYCH
3.1. Cel bazy danych
* przechowuje wszystkie dokumenty ze wszystkich źródeł,
* zapewnia szybkie wyszukiwanie pełnotekstowe,
* umożliwia kontrolę wersji dokumentów (hash),
* umożliwia incremental updates.
3.2. Schemat
CREATE TABLE documents (
  id INTEGER PRIMARY KEY,
  source TEXT NOT NULL,              -- mageos | hyva | satoshi
  url TEXT NOT NULL,
  title TEXT,
  content TEXT NOT NULL,
  content_hash TEXT NOT NULL,
  last_fetched DATETIME NOT NULL
);

CREATE VIRTUAL TABLE documents_fts USING fts5(
  content,
  content_unindexed,
  content='documents',
  content_rowid='id'
);

4. INDEXERY ŹRÓDEŁ DOKUMENTACJI
Każdy indexer działa według schematu:
1. pobierz listę dokumentów,
2. wyciągnij surową zawartość (HTML/Markdown),
3. zamień na plain-text,
4. wyodrębnij tytuł, URL,
5. wylicz content_hash (SHA-256),
6. sprawdź, czy hash się zmienił,
7. jeśli tak – zaktualizuj bazę,
8. jeśli nie – pomiń,
9. uzupełnij FTS.
4.1. MageOS
Źródła:
4.1.1. GitHub repo MageOS DevDocs
https://github.com/mage-os/devdocs

* foldery źródłowe zawierają czyste Markdown.
* każda sekcja to osobny plik .md.
4.1.2. HTML DevDocs
https://devdocs.mage-os.org/docs/main/

Crawler powinien:
* rekurencyjnie odwiedzać wszystkie linki w obrębie domeny,
* pobierać treść <main> dokumentacji,
* zamieniać HTML → tekst.
4.2. Hyvä Themes
Źródło:
https://docs.hyva.io/

Crawler:
* pobiera stronę główną,
* wykrywa listę działów (sidebar navigation),
* odwiedza wszystkie podstrony,
* parsuje zawartość <article> lub <main>.
UWAGA:
 Hyvä to produkt komercyjny → MCP musi działać lokalnie, nie publicznie.
4.3. Satoshi Hyvä Theme (Scandiweb)
4.3.1. GitHub
https://github.com/scandiweb/satoshi-hyva

* README.md
* docs/ (jeśli istnieje)
4.3.2. Notion Docs
Jeżeli dostęp:
* pobierz HTML,
* parsuj sekcje,
* usuwaj elementy UI Notion.
5. MCP SERVER — LOGIKA
Serwer MCP używa:
import { Server } from "@modelcontextprotocol/sdk/server";

Po uruchomieniu:
* ładuje SQLite,
* rejestruje tools,
* czeka na zapytania hosta (STDIN/STDOUT),
* reaguje synchronicznie.
6. DEFINICJA MCP TOOLS
6.1. Tool: search_docs
Cel: szybkie pełnotekstowe wyszukiwanie w bazie.
Input:
* query: string (wyszukiwane słowa)
* source: "all" | "mageos" | "hyva" | "satoshi"
Output:
* lista dokumentów z polami:
	* id
	* source
	* url
	* title
	* snippet
Implementacja:
server.tool("search_docs", {
  description: "Search documentation across MageOS, Hyva and Satoshi",
  inputSchema: {
    type: "object",
    properties: {
      query: { type: "string" },
      source: {
        type: "string",
        enum: ["all", "mageos", "hyva", "satoshi"],
        default: "all"
      }
    },
    required: ["query"]
  },
  async handler({ query, source }) {
    const rows = await db.all(`
      SELECT d.id, d.source, d.url, d.title,
             snippet(documents_fts, 0, '<b>', '</b>', '...', 12) AS snippet
      FROM documents_fts f
      JOIN documents d ON d.id = f.rowid
      WHERE documents_fts.MATCH ?
      ${source === "all" ? "" : "AND d.source = ?"}
      LIMIT 20
    `, source === "all" ? [query] : [query, source]);

    return rows;
  }
});

6.2. Tool: get_doc
Zwraca pełną treść dokumentu.
Input:
* id: number
Output:
* id, source, url, title, content
Implementacja:
server.tool("get_doc", {
  description: "Return full documentation text for a given ID",
  inputSchema: {
    type: "object",
    properties: {
      id: { type: "number" }
    },
    required: ["id"]
  },
  async handler({ id }) {
    const row = await db.get("SELECT * FROM documents WHERE id = ?", id);
    if (!row) throw new Error("Document not found");
    return row;
  }
});

7. CLI — URUCHAMIANE PRZEZ NPX (JAK PLAYWRIGHT-MCP)
Plik cli.ts:
#!/usr/bin/env node
import { startServer } from "./server.js";

async function main() {
  const dbPath = process.env.MCP_DOCS_DB_PATH || "docs.db";
  console.log("[MCP] Loading database:", dbPath);
  await startServer({ dbPath });
}

main().catch(err => {
  console.error("MCP failed:", err);
  process.exit(1);
});

Po publikacji możesz uruchamiać:
npx @smartx/mcp-mageos-docs@latest

8. PACKAGE.JSON — WZOROWANY NA MICROSOFT PLAYWRIGHT-MCP
{
  "name": "@smartx/mcp-mageos-docs",
  "version": "1.0.0",
  "description": "MCP Server providing documentation for MageOS, Hyva Themes and Satoshi Theme",
  "main": "dist/server.js",
  "type": "module",
  "bin": {
    "mcp-mageos-docs": "dist/cli.js"
  },
  "scripts": {
    "build": "tsc",
    "start": "node dist/cli.js"
  },
  "files": ["dist"],
  "dependencies": {
    "@modelcontextprotocol/sdk": "^1.0.0",
    "sqlite3": "^5.1.7",
    "sqlite": "^5.2.4",
    "cheerio": "^1.0.0"
  },
  "devDependencies": {
    "typescript": "^5.6.0"
  }
}

9. PUBLIKACJA NA NPM + GITHUB
9.1. Build
npm install
npm run build

9.2. Publikacja
npm publish --access public

9.3. Uruchamianie na hoście
npx @smartx/mcp-mageos-docs@latest

10. KONFIGURACJA W CLAUDE DESKTOP LUB INNYM HOST
Plik:
{
  "mcpServers": {
    "mageosDocs": {
      "command": "npx",
      "args": ["@smartx/mcp-mageos-docs@latest"]
    }
  }
}

11. SYSTEM AKTUALIZACJI (CRON)
Możesz dodać:
0 2 * * * npx @smartx/mcp-mageos-docs@latest --update

lub wbudować aktualizację:
* on startup,
* scheduled (node-cron).
12. WYMAGANIA NIEFUNKCJONALNE
1. Wydajność:
	* wyszukiwanie musi zwracać wyniki < 200 ms,
	* FTS5 zoptymalizowane (prefiks + ranking snippetów).
1. Stabilność:
	* wszystkie błędy logowane,
	* nie może wyciekać pamięć.
1. Bezpieczeństwo:
	* brak kodu zdalnego,
	* Hyvä i Satoshi tylko lokalnie.
1. Czytelność kodu:
	* standard TypeScript,
	* nazewnictwo camelCase,
	* logowanie na poziomie INFO/ERROR.
1. Rozszerzalność:
	* łatwo dodać kolejne źródła dokumentacji.
13. STANDARDY KODU
* TypeScript strict mode.
* ES Modules (type: "module" w package.json).
* Funkcje max 100 linii.
* Pliki max 500 linii.
* Każdy indexer w osobnym module.
* Każdy tool MCP w osobnym fragmencie logicznym.
14. LICENCJE I OGRANICZENIA
MageOS
* open source → OK
Hyvä
* dokumentacja komercyjna
* użycie lokalne, nie wolno publikować mirroru
Satoshi Theme
* dokumentacja częściowo publiczna (GitHub)
* Notion – tylko lokalny RAG, nie do publikacji
15. PODSUMOWANIE
Ten dokument stanowi kompletny, jednoznaczny, najwyższej szczegółowości opis zadania dla Claude Code:
✔ stworzenie pełnego projektu MCP Servera
 ✔ pobierającego i indeksującego dokumentację MageOS / Hyvä / Satoshi
 ✔ publikowanego jako npm package
 ✔ działającego jak @playwright/mcp
 ✔ uruchamianego przez host MCP za pomocą npx
 ✔ z pełnym systemem aktualizacji i indeksacji
 ✔ i gotowego do integracji z agentami AI
Jeśli chcesz — mogę teraz wygenerować gotowe pliki źródłowe:
* cały folder src/
* pełny package.json
* gotowy crawler MageOS
* gotowy crawler Hyvä
* gotowy crawler Satoshi
* pełny serwer MCP w TypeScript
* schema SQLite
* CLI
* README.md

Sprawdzone zrodla dokumentacji : 
Hyva : https://docs.hyva.io/hyva-themes/getting-started/index.html(https://docs.hyva.io/hyva-themes/getting-started/index.html)
Mageos : https://devdocs.mage-os.org/docs/main(https://devdocs.mage-os.org/docs/main)
Satoshi theme : https://scandiweb.notion.site/Hyv-Satoshi-theme-documentation-1adc346d72c080ffb1b2faa454d6739d(https://scandiweb.notion.site/Hyv-Satoshi-theme-documentation-1adc346d72c080ffb1b2faa454d6739d)
Komendy serwera MCP dla poszczegolnych blokow : 

1️⃣ KOMENDY DLA HYVÄ (20 szt.)
1. hyva_installation_overview
 Zwraca ogólny opis instalacji Hyvä (wymagania, wersje Magento/MageOS, kompatybilność modułów).
2. hyva_installation_steps_clean_magento
 Kroki instalacji Hyvä na czystej instancji Magento/MageOS (kolejność komend, konfiguracja).
3. hyva_license_and_download
 Informacje o licencji, dostępie do paczek, repozytoriów prywatnych, tokenach i pobieraniu Hyvä.
4. hyva_required_dependencies
 Lista wymaganych zależności (PHP, composer packages, moduły Magento, wymagania frontendu, node/npm itp.).
5. hyva_theme_activation_and_configuration
 Jak aktywować Hyvä jako motyw, jak ustawić „default theme”, konfiguracja w panelu admina Magento.
6. hyva_build_frontend_assets
 Jak budować assety frontendu: npm/yarn, komendy build, dev, watch, struktura plików bundlera.
7. hyva_tailwind_configuration
 Konfiguracja Tailwinda w Hyvä: pliki konfiguracyjne, purge, extend, custom utilities, safelist.
8. hyva_templates_structure
 Struktura plików template (PHTML, layouty, bloki), nazewnictwo, override widoków Magento.
9. hyva_components_library_overview
 Przegląd gotowych komponentów Hyvä (np. koszyk, mini-cart, menu, formularze) z opisem gdzie są w kodzie.
10. hyva_add_custom_component
 Jak stworzyć własny komponent Hyvä (HTML/Alpine/Tailwind), gdzie go umieścić, jak włączyć w szablonie.
11. hyva_javascript_stack
 Opis stosu JS w Hyvä (Alpine.js, minimalny JS, jak unikać ciężkich frameworków, patterny na interakcje).
12. hyva_styling_best_practices
 Najlepsze praktyki stylowania: użycie Tailwind, BEM (jeśli jest), wykorzystanie zmiennych, responsywność.
13. hyva_checkout_customization
 Jak dostosowywać checkout w Hyvä: które pliki, gdzie hooki, na co uważać z kompatybilnością modułów płatności.
14. hyva_performance_optimization
 Rekomendacje dot. wydajności: critical CSS, lazy loading, minimalizacja JS, cache, integracja z Varnish/Redis.
15. hyva_modules_compatibility_matrix
 Informacje o kompatybilności popularnych modułów Magento z Hyvä (oficjalne integracje, obejścia).
16. hyva_translation_and_locale_handling
 Jak działa tłumaczenie, pliki i18n, obsługa wielu języków, fallback, specyfika w Hyvä.
17. hyva_debugging_and_troubleshooting
 Typowe problemy (brak stylów, JS errors, brak bloków) i procedura diagnostyczna przy pracy z Hyvä.
18. hyva_upgrade_guide
 Jak aktualizować Hyvä do nowszych wersji: backup, zmiany breaking, merge zmian w konfiguracji, changelog.
19. hyva_third_party_integration_patterns
 Wzorce integracji Hyvä z zewnętrznymi usługami (np. tracking, analityka, chat, widgety).
20. hyva_full_stack_example_setup
 Kompletny opis przykładowej instalacji: Magento/MageOS + Hyvä + Varnish + Redis + opcjonalnie Satoshi, z kolejnością kroków.
2️⃣ KOMENDY DLA MAGEOS (20 szt.)
1. mageos_installation_requirements
 Wymagania systemowe (PHP, MySQL/DB, Elasticsearch/OpenSearch, pamięć, system operacyjny).
2. mageos_fresh_installation_steps
 Szczegółowy poradnik instalacji MageOS od zera (pobranie, composer, konfiguracja env.php).
3. mageos_upgrade_and_patching
 Zasady aktualizacji MageOS, komendy do upgradu, migracje bazy, patche bezpieczeństwa.
4. mageos_module_development_basics
 Podstawy tworzenia modułu w MageOS: struktura folderów, registration.php, module.xml, di.xml.
5. mageos_theme_development_basics
 Jak stworzyć własny motyw: struktura, dziedziczenie po Luma/Blank lub integracja z Hyvä/Satoshi.
6. mageos_dependency_management_composer
 Jak zarządzać pakietami Composer dla MageOS: require, wersjonowanie, autoload, prywatne repo.
7. mageos_frontend_stack_overview
 Omówienie frontendu MageOS: layout XML, PHTML, RequireJS (w kontekście gdy nie używa się Hyvä), LESS/JS.
8. mageos_backend_configuration_important_sections
 Ważne sekcje konfiguracji w panelu admina (cache, indexery, store config, base URLs, cron).
9. mageos_cron_and_indexers_setup
 Konfiguracja CRON, indexerów, komendy CLI (bin/magento cron, indexer:reindex, setup:upgrade itd.).
10. mageos_cache_layers_explained
 Warstwy cache (Magento cache, Full Page Cache, Varnish, Redis), jak je ustawić i czyścić.
11. mageos_api_rest_graphql_overview
 Omówienie API REST i GraphQL w MageOS: endpointy, autoryzacja, korzystanie z tokenów.
12. mageos_configuration_scopes
 Zakresy konfiguracji (global, website, store view) i ich wpływ na motyw oraz Hyvä/Satoshi.
13. mageos_security_best_practices
 Najlepsze praktyki bezpieczeństwa: uprawnienia plików, użytkownicy admina, dwuetapowe logowanie, zabezpieczenia panelu.
14. mageos_logging_and_debugging
 Jak działa logowanie w MageOS, gdzie są logi, jak włączyć developer mode, Xdebug, debug modulo.
15. mageos_database_schema_and_migrations
 Jak definiować schemat bazy, używać db_schema.xml i migracji danych (data patches, schema patches).
16. mageos_cli_commands_reference
 Lista najczęściej używanych komend bin/magento z opisami i typowymi scenariuszami wykorzystania.
17. mageos_integration_with_varnish_and_redis
 Jak skonfigurować Varnish i Redis z MageOS: pliki VCL, konfiguracja cache, typowe pułapki.
18. mageos_performance_optimization
 Praktyki optymalizacji: production mode, generowanie statics, kompresja, bundling, minifikacja, opcache.
19. mageos_multistore_setup
 Jak zbudować multistore / multiwebsite w MageOS, powiązać z domenami, motywami, Hyvä/Satoshi.
20. mageos_full_stack_deployment_pattern
 Kompletny opis deployu: Git → CI/CD → serwer → konfiguracja cache → Hyvä/Satoshi → testy końcowe.
3️⃣ KOMENDY DLA SATOSHI THEME (20 szt.)
1. satoshi_overview_and_use_cases
 Ogólny opis Satoshi (Hyvä-based theme), do czego służy, jakie problemy rozwiązuje, kiedy go użyć.
2. satoshi_installation_prerequisites
 Wymagania wstępne: posiadanie Hyvä, wersje Magento/MageOS, kompatybilne moduły, dostęp do repo.
3. satoshi_installation_steps
 Szczegółowe kroki instalacji Satoshi na istniejącym projekcie Hyvä/MageOS.
4. satoshi_theme_structure
 Struktura plików motywu: layout, templates, komponenty, katalogi typu web, templates, etc.
5. satoshi_components_catalog
 Katalog komponentów Satoshi (np. hero, bannery, grids, blog elements, menu, header/footer) z lokalizacją w kodzie.
6. satoshi_styling_and_design_system
 Jak Satoshi używa Tailwind/Hyvä, jakie ma własne utility classes, design system, spacing, kolory.
7. satoshi_customization_guide
 Jak modyfikować komponenty Satoshi bez tracenia możliwości aktualizacji (override, child theme, best practices).
8. satoshi_checkout_and_cart_customization
 Specyfika koszyka i checkoutu w Satoshi, jak dostosować je do niestandardowych procesów zakupowych.
9. satoshi_content_blocks_and_cms
 Jak Satoshi integruje się z CMS blokami, Page Builderem (jeśli wspierany) oraz jak tworzyć landing pages.
10. satoshi_performance_considerations
 Wydajność Satoshi: domyślne optymalizacje, jak nie spowolnić motywu przy własnych modyfikacjach.
11. satoshi_dependencies_and_versioning
 Zależności (Hyvä, konkretne wersje, inne paczki), zasady wersjonowania, migracje między wersjami Satoshi.
12. satoshi_demo_layouts_and_presets
 Opis gotowych layoutów/demo (jeśli występują), jak je zaimportować i wykorzystać jako bazę projektu.
13. satoshi_navigation_and_header_patterns
 Wzorce nawigacji (mega-menu, mobile nav), modyfikacje headera, sticky header, search w headerze.
14. satoshi_product_page_layouts
 Jak zorganizowane są strony produktowe, komponenty PDP, jak dodać nowe sekcje (reviews, UGC, rekomendacje).
15. satoshi_category_page_layouts
 Layout listingów kategorii, filtry, sortowanie, paginacja, infinite scroll (jeśli jest), jak to dostosować.
16. satoshi_integration_with_marketing_tools
 Wzorce integracji z narzędziami marketingowymi (tag managers, pixel, analityka, A/B testy).
17. satoshi_typical_customization_examples
 Konkretne przykłady: zmiana widoku kart produktowych, dodanie wstążek/promek, zmiana układu sekcji na homepage.
18. satoshi_debugging_and_common_issues
 Typowe problemy w Satoshi (brak stylów, konflikt z modułem X, błędy JS) i jak je diagnozować.
19. satoshi_upgrade_path
 Jak aktualizować Satoshi: jak śledzić changelog, które pliki porównać, jak testować po aktualizacji.
20. satoshi_full_stack_example_setup
 Kompletny scenariusz: MageOS + Hyvä + Satoshi + Varnish + Redis + CDN, z opisem kolejności działań.

